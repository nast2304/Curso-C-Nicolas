<HTML><!-- InstanceBegin template="/Templates/plantilla.dwt" codeOutsideHTMLIsLocked="false" -->

<HEAD>
     <!-- InstanceBeginEditable name="doctitle" -->
     <TITLE>Curso de C - Arrays (Matrices)</TITLE>
     <!-- InstanceEndEditable -->
     <meta name="decription" content="Curso de C - Introducci�n">
     <meta name="keywords" content="Programaci&oacute;n, Curso de C, C">
     <META NAME="GENERATOR" CONTENT="Arachnophilia 3.5">
     <META NAME="FORMATTER" CONTENT="Arachnophilia 3.5">
     <meta name="author" content="Gorka Urrutia">
     <meta name="DC.Creator" content="Gorka Urrutia">
     <META name="robots" content="noindex, nofollow">
     <link rel="stylesheet" href="cursoc.css">
     <!-- InstanceBeginEditable name="head" -->


     <!-- InstanceEndEditable -->
</HEAD>

<BODY>
     <a name="arriba"></a>

     <table width="100%" border="0">
          <tr>
               <td align="left"><img src="cursoc.gif" alt="Curso de C" border="0">
               </td>
               <td align="right"><a href="http://www.elrincondelc.com" target="_top"><img src="colibri.gif"
                              alt="El Rinc�n del C - www.elrincondelc.com" border="0"></a>
               </td>
          </tr>
     </table>
     <!-- InstanceBeginEditable name="Titulo" -->
     <h1>Arrays (Matrices)</h1><!-- InstanceEndEditable -->


     <p class="barranavegaciontop"><!-- InstanceBeginEditable name="BarraNavegacion" -->
          <a href="cursoc9.html">[Anterior]</a> <a href="cursoc11.html">[Siguiente]</a>
          <a href="index.html" target="_top">[Contenido]</a>
          <!-- InstanceEndEditable -->
     </p>

     <!-- InstanceBeginEditable name="Cuerpo" -->
     <a name="arriba"></a>

     <A NAME="contenido"></A>
     <H2>
          Contenido del Capítulo:
     </H2>
     <UL>
          <li><A HREF="#intro">Introducción, ¿Qué es un array?</A><BR>
          <li><A HREF="#declaracion">Declaración de un Array</A><BR>
          <li><A HREF="#dimension">Sobre la dimensión de un array</A><BR>
          <li><A HREF="#inicializar">Inicializar un array</A><BR>
          <li><A HREF="#recorrer">Recorrer un array</A><BR>
          <li><A HREF="#punteros">Punteros a arrays</A><BR>
          <li><A HREF="#funciones">Paso de un array a una función</A><BR>
          <li><A HREF="#ejercicios">Ejercicios</A><BR>
     </UL>


     <A NAME="intro"></A>
     <H2>
          ¿Qué es un array?
     </H2>


     <p class="nota">Nota: algunas personas conocen a los arrays como <em>arreglos,
               matrices o vectores.</em> Sin embargo, en este curso, vamos a usar el t&eacute;rmino
          array ya que es, seg&uacute;n creo, el m&aacute;s extendido en la bibliograf&iacute;a
          sobre el tema.</p>
     <p>La definición sería algo así:</p>

     <BLOCKQUOTE class="texto">Un array es un conjunto de variables del mismo tipo que tienen el mismo nombre y se
          diferencian en el �ndice.</BLOCKQUOTE>

     <p>Pero ¿qué quiere decir esto y para qué lo queremos?. Pues bien, supongamos que somos un metereólogo y queremos
          guardar en el ordenador la temperatura que ha hecho cada hora del dia. Para darle cierta utilidad al final
          calcularemos la media de las temperaturas. Con lo que sabemos hasta ahora sería algo así (que nadie se moleste
          ni en probarlo):</p>


     <DIV CLASS="ejemplo">
          <PRE>#include &lt;stdio.h&gt;

int main()
     {
     /* Declaramos 24 variables, una para cada hora del dia */
     int temp1,  temp2,  temp3,  temp4,  temp5,  temp6,  temp7,  temp8;
     int temp9,  temp10, temp11, temp12, temp13, temp14, temp15, temp16;
     int temp17, temp18, temp19, temp20, temp21, temp22, temp23, temp0;
     int media;

     /* Ahora tenemos que dar el valor de cada una */
     printf( "Temperatura de las 0: " );
     scanf( "%i", &temp0 );
     printf( "Temperatura de las 1: " );
     scanf( "%i", &temp1 );
     printf( "Temperatura de las 2: " );
     scanf( "%i", &temp2 );
     ...
     printf( "Temperatura de las 23: " );
     scanf( "%i", &temp23 );
	
     media = ( temp0 + temp1 + temp2 + temp3 + temp4 + ... + temp23 ) / 24;
     printf( "\nLa temperatura media es %i\n", media );
     }</PRE>
     </DIV>

     <p>NOTA: Los puntos suspensivos los he puesto para no tener que escribir todo y que no ocupe tanto, no se pueden
          usar en un programa.</p>


     <p>Para acortar un poco el programa podríamos hacer algo así:</p>

     <DIV CLASS="ejemplo">
          <PRE>#include &lt;stdio.h&gt;

int main()
     {
     /* Declaramos 24 variables, una para cada hora del dia */
     int temp1,  temp2,  temp3,  temp4,  temp5,  temp6,  temp7,  temp8;
     int temp9,  temp10, temp11, temp12, temp13, temp14, temp15, temp16;
     int temp17, temp18, temp19, temp20, temp21, temp22, temp23, temp0;
     int media;

     /* Ahora tenemos que dar el valor de cada una */
     printf( "Introduzca las temperaturas desde las 0 hasta las 23 separadas por un espacion: " );
     scanf( "%i %i %i ... %i", &temp0, &temp1, &temp2, ... &temp23 );
	
     media = ( temp0 + temp1 + temp2 + temp3 + temp4 + ... + temp23 ) / 24;
     printf( "\nLa temperatura media es %i\n", media );
     }</PRE>
     </DIV>




     <p>Lo que no deja de ser un peñazo. Y esto con un ejemplo que tiene tan sólo 24 variables, ¡¡imagénate si son más!!
     </p>


     <p>Y precisamente aquí es donde nos vienen de perlas los arrays. Vamos a hacer el programa con un array. Usaremos
          nuestros conocimientos de bucles for y de scanf.</p>

     <DIV CLASS="ejemplo">
          <PRE>#include &lt;stdio.h&gt;

int main()
     {
     int temp[24]; /* Con esto ya tenemos declaradas las 24 variables */
     float media = 0;
     int hora;

     /* Ahora tenemos que dar el valor de cada una */
     for( hora=0; hora&lt;24; hora++ )
          {
          printf( "Temperatura de las %i: ", hora );
          scanf( "%i", &temp[hora] );
          media += temp[hora];
          }
     media = media / 24;

     printf( "\nLa temperatura media es %f\n", media );
     }</PRE>
     </DIV>


     <p>Como ves es un programa más rápido de escribir (y es menos aburrido hacerlo), y más cómodo para el usuario que
          el anterior.</p>


     <p>Como ya hemos comentado cuando declaramos una variable lo que estamos haciendo es reservar una zona de la
          memoria para ella. Cuando declaramos un array lo que hacemos (en este ejemplo) es reservar espacio en memoria
          para 24 variables de tipo int. El tamaño del array (24) lo indicamos entre corchetes al definirlo. Esta es la
          parte de la definición que dice: <I>Un array es un conjunto de variables del mismo tipo que tienen el mismo
               nombre</I>.</p>


     <p>La parte final de la definición dice: <I>y se diferencian en el índice</I>. En ejemplo recorremos la matriz
          mediante un bucle for y vamos dando valores a los distintos elementos de la matriz. Para indicar a qué
          elemento nos referimos usamos un número entre corchetes (en este caso la variable hora), este número es lo que
          se llama
          <B>Indice</B>. El primer elemento de la matriz en <B>
               <FONT COLOR="#0000ff" SIZE="+2" FACE="Comic Sans MS, Arial">C</FONT>
          </B> tiene el índice 0, El segundo tiene el 1 y así sucesivamente. De modo que si queremos dar un valor al
          elemento 4 (índice 3) haremos:
     </p>


     <DIV CLASS="ejemplo">
          <PRE>
	temp[ 3 ] = 20;
</PRE>
     </DIV>

     <p>NOTA: No hay que confundirse. En la declaración del array el número entre corchetes es el número de elementos,
          en cambio cuando ya usamos la matriz el número entre corchetes es el índice.</p>



     <p class="volver"><a href="#arriba">[Arriba]</a></p>

     <A NAME="declaracion"></A>
     <H2>
          Declaración de un Array
     </H2>

     <p>En lugar de declarar 24 variables distintas, podemos usar un <b>array</b>. Así podemos almacenar todas las
          temperaturas en un solo nombre de variable:</p>

     <DIV CLASS="ejemplo">
          <PRE>#include &lt;stdio.h&gt;

int main()
{
    int temp[24];  /* Declaramos un array de 24 enteros */
    int i;
    int media = 0;

    for(i = 0; i &lt; 24; i++)
    {
        printf("Temperatura de la hora %i: ", i);
        scanf("%i", &temp[i]);
        media += temp[i];
    }

    media /= 24;
    printf("\nLa temperatura media es %i\n", media);
}
</PRE>
     </DIV>

     <A NAME="dimension"></A>
     <H2>
          Sobre la dimensión de un array
     </H2>

     <p>Al declarar un array debemos indicar cuántos elementos va a contener. Esto se llama <b>dimensión</b> del array:
     </p>
     <UL>
          <LI>int temp[24]; → array de 24 enteros
          <LI>float notas[10]; → array de 10 flotantes
          <LI>char nombre[30]; → array de 30 caracteres
     </UL>
     <p>El índice de los arrays en C comienza en 0, por lo que el primer elemento es temp[0] y el último es temp[23]
          para un
          array de 24 elementos.</p>

     <A NAME="inicializar"></A>
     <H2>
          Inicializar un array
     </H2>

     <p>Podemos dar valores iniciales al declarar el array:</p>

     <DIV CLASS="ejemplo">
          <PRE>
int temp[5] = {20, 21, 19, 23, 22};  /* Inicialización directa */
int notas[10] = {0};                 /* Todos los elementos se inicializan a 0 */
</PRE>
     </DIV>

     <A NAME="recorrer"></A>
     <H2>
          Recorrer un array
     </H2>

     <p>Para acceder a los elementos de un array usamos un bucle <b>for</b>:</p>

     <DIV CLASS="ejemplo">
          <PRE>
for(i = 0; i &lt; 5; i++)
{
    printf("temp[%i] = %i\n", i, temp[i]);
}
</PRE>
     </DIV>

     <A NAME="punteros"></A>
     <H2>
          Punteros a arrays
     </H2>

     <p>Un array es, en realidad, un puntero al primer elemento. Por ejemplo:</p>

     <DIV CLASS="ejemplo">
          <PRE>
int temp[5] = {10, 20, 30, 40, 50};
int *ptr = temp;  /* ptr apunta al primer elemento del array */

printf("%i\n", *ptr);    /* Muestra 10 */
printf("%i\n", *(ptr+2)); /* Muestra 30, equivalente a temp[2] */
</PRE>
     </DIV>

     <A NAME="funciones"></A>
     <H2>
          Paso de un array a una función
     </H2>

     <p>Podemos pasar un array a una función usando un puntero:</p>

     <DIV CLASS="ejemplo">
          <PRE>
#include &lt;stdio.h&gt;

void imprimirArray(int arr[], int n)
{
    int i;
    for(i = 0; i &lt; n; i++)
        printf("%i ", arr[i]);
    printf("\n");
}

int main()
{
    int numeros[5] = {1, 2, 3, 4, 5};
    imprimirArray(numeros, 5);
}
</PRE>
     </DIV>

     <p>NOTA: Los puntos suspensivos los he puesto para no tener que escribir todo y que no ocupe tanto, no se pueden
          usar en un programa.</p>


     <p>Para acortar un poco el programa podr�amos hacer algo as�:</p>

     <DIV CLASS="ejemplo">
          <PRE>#include &lt;stdio.h&gt;

int main()
     {
     /* Declaramos 24 variables, una para cada hora del dia */
     int temp1,  temp2,  temp3,  temp4,  temp5,  temp6,  temp7,  temp8;
     int temp9,  temp10, temp11, temp12, temp13, temp14, temp15, temp16;
     int temp17, temp18, temp19, temp20, temp21, temp22, temp23, temp0;
     int media;

     /* Ahora tenemos que dar el valor de cada una */
     printf( "Introduzca las temperaturas desde las 0 hasta las 23 separadas por un espacion: " );
     scanf( "%i %i %i ... %i", &temp0, &temp1, &temp2, ... &temp23 );
	
     media = ( temp0 + temp1 + temp2 + temp3 + temp4 + ... + temp23 ) / 24;
     printf( "\nLa temperatura media es %i\n", media );
     }</PRE>
     </DIV>




     <p>Lo que no deja de ser un pedazo. Y esto con un ejemplo que tiene tan sólo 24 variables, ¡¡imagínate si son más!!
     </p>

     <p>Y precisamente aquí es donde nos vienen de perlas los arrays. Vamos a hacer el programa con un array. Usaremos
          nuestros conocimientos de bucles for y de scanf.</p>

     <DIV CLASS="ejemplo">
          <PRE>#include &lt;stdio.h&gt;

int main()
{
    int temp[24]; /* Con esto ya tenemos declaradas las 24 variables */
    float media = 0;
    int hora;

    /* Ahora tenemos que dar el valor de cada una */
    for( hora=0; hora&lt;24; hora++ )
    {
        printf( "Temperatura de las %i: ", hora );
        scanf( "%i", &temp[hora] );
        media += temp[hora];
    }
    media = media / 24;

    printf( "\nLa temperatura media es %f\n", media );
}
</PRE>
     </DIV>

     <p>Como ves es un programa más rápido de escribir (y es menos aburrido hacerlo), y más cómodo para el usuario que
          el anterior.</p>

     <p>Como ya hemos comentado, cuando declaramos una variable lo que estamos haciendo es reservar una zona de la
          memoria para ella. Cuando declaramos un array, lo que hacemos (en este ejemplo) es reservar espacio en memoria
          para 24 variables de tipo int. El tamaño del array (24) lo indicamos entre corchetes al definirlo. Esta es la
          parte de la definición que dice: <I>Un array es un conjunto de variables del mismo tipo que tienen el mismo
               nombre</I>.</p>

     <p>La parte final de la definición dice: <I>y se diferencian en el índice</I>. En el ejemplo recorremos la matriz
          mediante un bucle for y vamos dando valores a los distintos elementos de la matriz. Para indicar a qué
          elemento nos referimos usamos un número entre corchetes (en este caso la variable hora), este número es lo que
          se llama <B>Índice</B>. El primer elemento de la matriz en <B>
               <FONT COLOR="#0000ff" SIZE="+2" FACE="Comic Sans MS, Arial">C</FONT>
          </B> tiene el índice 0, el segundo tiene el 1 y así sucesivamente. De modo que si queremos dar un valor al
          elemento 4 (índice 3) haremos:</p>

     <DIV CLASS="ejemplo">
          <PRE>
temp[ 3 ] = 20;
</PRE>
     </DIV>

     <p>NOTA: No hay que confundirse. En la declaración del array el número entre corchetes es el número de elementos,
          en cambio cuando ya usamos la matriz el número entre corchetes es el índice.</p>

     <p class="volver"><a href="#arriba">[Arriba]</a></p>

     <a name="declaracion"></a>
     <h2>
          Declaración de un Array
     </h2>

     <p>La forma general de declarar un array es la siguiente:</p>

     <div class="ejemplo">
          <pre>
    <i>tipo_de_dato</i> nombre_del_array[ dimensión ];
</pre>
     </div>

     <p>El <i>tipo_de_dato</i> es uno de los tipos de datos conocidos (int, char, float...) o de los definidos por el
          usuario con typedef. En el ejemplo era int.</p>

     <p>El nombre_del_array es el nombre que damos al array, en el ejemplo era temp.</p>

     <p>La dimensión es el número de elementos que tiene el array.</p>

     <p>Como he indicado antes, al declarar un array reservamos en memoria tantas variables del <i>tipo_de_dato</i>
          como las indicadas en <i>dimensión</i>.</p>

     <p class="volver"><a href="#arriba">[Arriba]</a></p>

     <a name="dimension"></a>
     <h2>
          Sobre la dimensión de un Array
     </h2>

     <p>Hemos visto en el ejemplo que tenemos que indicar en varios sitios el tamaño del array: en la declaración, en el
          bucle for y al calcular la media. Este es un programa pequeño, en un programa mayor probablemente habrá que
          escribirlo muchas más veces. Si en un momento dado queremos cambiar la dimensión del array tendremos que
          cambiar todos. Si nos equivocamos al escribir el tamaño (ponemos 25 en vez de 24) cometeremos un error y puede
          que no nos demos cuenta. Por eso es mejor usar una constante con nombre, por ejemplo ELEMENTOS.</p>

     <div class="ejemplo">
          <pre>
#include &lt;stdio.h&gt;

#define ELEMENTOS 24
int main()
{
    int temp[<b>ELEMENTOS</b>]; /* Con esto ya tenemos declaradas las 24 variables */
    float media = 0;
    int hora;

    /* Ahora tenemos que dar el valor de cada una */
    for( hora = 0; hora &lt; <b>ELEMENTOS</b>; hora++ )
    {
        printf( "Temperatura de las %i: ", hora );
        scanf( "%i", &temp[hora] );
        media += temp[hora];
    }
    media = media / <b>ELEMENTOS</b>;

    printf( "\nLa temperatura media es %f\n", media );
}
<font size="-2" color="#000000">Comprobado con DJGPP</font>
</pre>
     </div>

     <p>Ahora con sólo cambiar el valor de elementos una vez lo estaremos haciendo en todo el programa.</p>

     <p class="volver"><a href="#arriba">[Arriba]</a></p>

     <a name="inicializar"></a>
     <h2>
          Inicializar un array
     </h2>

     <p>En <b>
               <font color="#0000ff" size="+2" face="Comic Sans MS, Arial">C</font>
          </b> se pueden inicializar los arrays al declararlos igual que hacíamos con las variables. Recordemos que se
          podía hacer:</p>

     <div class="ejemplo">
          <pre>
    int hojas = 34;
</pre>
     </div>

     <p>Pues con arrays se puede hacer:</p>

     <div class="ejemplo">
          <pre>
    int temperaturas[24] = { 15, 18, 20, 23, 22, 24, 22, 25, 26, 25, 24, 22, 
                             21, 20, 18, 17, 16, 17, 15, 14, 14, 14, 13, 12 };
</pre>
     </div>

     <p>Ahora el elemento 0 (que será el primero), es decir temperaturas[0] valdrá 15. El elemento 1 (el segundo) valdrá
          18 y así con todos. Vamos a ver un ejemplo:</p>

     <div class="ejemplo">
          <pre>
#include &lt;stdio.h&gt;

int main()
{
    int hora;
    int temperaturas[24] = { 15, 18, 20, 23, 22, 24, 22, 25, 26, 25, 24,
                             22, 21, 20, 18, 17, 16, 17, 15, 14, 14, 14, 13, 12 };

    for (hora = 0; hora &lt; 24; hora++)
    {
        printf( "La temperatura a las %i era de %i grados.\n", hora, temperaturas[hora] );
    }
}
<font size="-2" color="#000000">Comprobado con DJGPP</font>
</pre>
     </div>

     <p>Pero a ver quién es el habilidoso que no se equivoca al meter los datos; no es difícil olvidarse alguno. Hemos
          indicado al compilador que nos reserve memoria para un array de 24 elementos de tipo int. ¿Qué ocurre si
          metemos menos de los reservados? Pues no pasa nada, sólo que los elementos que falten valdrán cero.</p>

     <div class="ejemplo">
          <pre>
#include &lt;stdio.h&gt;

int main()
{
    int hora;
    /* Faltan los tres últimos elementos */
    int temperaturas[24] = { 15, 18, 20, 23, 22, 24, 22, 25, 26, 25,
                             24, 22, 21, 20, 18, 17, 16, 17, 15, 14, 14 };

    for (hora = 0; hora &lt; 24; hora++)
    {
        printf( "La temperatura a las %i era de %i grados.\n", hora, temperaturas[hora] );
    }
}
<font size="-2" color="#000000">Comprobado con DJGPP</font>
</pre>
     </div>

     <p>El resultado será:</p>

     <div class="ejemplo">
          <pre>
La temperatura a las 0 era de 15 grados.
La temperatura a las 1 era de 18 grados.
La temperatura a las 2 era de 20 grados.
La temperatura a las 3 era de 23 grados.
...
La temperatura a las 17 era de 17 grados.
La temperatura a las 18 era de 15 grados.
La temperatura a las 19 era de 14 grados.
La temperatura a las 20 era de 14 grados.
<b>La temperatura a las 21 era de 0 grados.
La temperatura a las 22 era de 0 grados.
La temperatura a las 23 era de 0 grados.</b>
</pre>
     </div>

     <p>Vemos que los últimos 3 elementos son nulos, que son aquellos a los que no hemos dado valores. El compilador no
          nos avisa de que hemos metido menos datos de los reservados.</p>

     <p>NOTA: Fíjate que para recorrer del elemento 0 al 23 (24 elementos) hacemos:
          <code>for(hora=0; hora&lt;24; hora++)</code>.
          La condición es que hora sea menos de 24.
          También podíamos haber hecho que <code>hora != 24</code>.
     </p>

     <p>Ahora vamos a ver el caso contrario: metemos más datos de los reservados. Vamos a meter 25 en vez de 24. Si
          hacemos esto, dependiendo del compilador obtendremos un error o al menos un warning (aviso). En unos
          compiladores el programa se creará y en otros no, pero aun así nos avisa del fallo. Debe indicarse que estamos
          intentando guardar un dato de más: no hemos reservado memoria para él.</p>

     <p>Si la matriz debe tener una longitud determinada, usamos este método de definir el número de elementos. En
          nuestro caso era conveniente, porque los días siempre tienen 24 horas. Es conveniente definir el tamaño de la
          matriz para que nos avise si metemos más elementos de los necesarios.</p>

     <p>En los demás casos podemos usar un método alternativo: dejar al ordenador que cuente los elementos que hemos
          metido y nos reserve espacio para ellos:</p>

     <div class="ejemplo">
          <pre>
#include &lt;stdio.h&gt;

int main()
{
    int hora;
    /* Faltan los tres últimos elementos */
    int <b>temperaturas<u>[]</u></b> = { 15, 18, 20, 23, 22, 24, 22, 25, 26, 25, 24, 
                                        22, 21, 20, 18, 17, 16, 17, 15, 14, 14 };

    for (hora = 0; hora &lt; 24; hora++)
    {
        printf("La temperatura a las %i era de %i grados.\n",
               hora, temperaturas[hora]);
    }
}
<font size="-2" color="#000000">Comprobado con DJGPP</font>
</pre>
     </div>

     <p>Vemos que no hemos especificado la dimensión del array <code>temperaturas</code>. Hemos dejado los corchetes en
          blanco.
          El ordenador contará los elementos que hemos puesto entre llaves y reservará espacio para ellos. De esta forma
          siempre habrá el espacio necesario, ni más ni menos. La pega es que si ponemos más de los que queríamos no nos
          daremos cuenta.</p>

     <p>Para saber en este caso cuántos elementos tiene la matriz podemos usar el operador <code>sizeof</code>.
          Dividimos el
          tamaño de la matriz entre el tamaño de sus elementos y tenemos el número de elementos.</p>

     <div class="ejemplo">
          <pre>
#include &lt;stdio.h&gt;

int main()
{
    int hora;
    int elementos;
    int temperaturas[] = { 15, 18, 20, 23, 22, 24, 22, 25, 26, 25,
                           24, 22, 21, 20, 18, 17, 16, 17, 15, 14, 14 };

    elementos = sizeof temperaturas / sizeof(int);
    for (hora = 0; hora &lt; elementos; hora++)
    {
        printf("La temperatura a las %i era de %i grados.\n",
               hora, temperaturas[hora]);   /* corregido: temperaturas[] */
    }
    printf("Han sido %i elementos.\n", elementos);
}
<font size="-2" color="#000000">Comprobado con DJGPP</font>
</pre>
     </div>

     <p class="volver"><a href="#arriba">[Arriba]</a></p>

     <a name="recorrer"></a>
     <h2>
          Recorrer un array
     </h2>

     <p>En el apartado anterior veíamos un ejemplo que mostraba todos los datos de un array. Veíamos también lo que
          pasaba si metíamos más o menos elementos al inicializar la matriz. Ahora vamos a ver qué pasa si intentamos
          imprimir más elementos de los que hay en la matriz; en este caso intentamos imprimir 28 elementos cuando sólo
          hay 24:</p>

     <div class="ejemplo">
          <pre>
#include &lt;stdio.h&gt;

int main()
{
    int hora;
    /* Faltan los tres últimos elementos */
    int temperaturas[24] = { 15, 18, 20, 23, 22, 24, 22, 25, 26, 25, 24, 
                             22, 21, 20, 18, 17, 16, 17, 15, 14, 14, 13, 13, 12 };

    for (hora = 0; <b>hora &lt; 28</b>; hora++)
    {
        printf("La temperatura a las %i era de %i grados.\n",
               hora, temperaturas[hora]);
    }
}
</pre>
     </div>
     <font size="-2">Comprobado con DJGPP</font>

     <p>Lo que se obtiene en mi ordenador es:</p>

     <div class="ejemplo">
          <pre>
La temperatura a las 22 era de 15 grados.
...
La temperatura a las 23 era de 12 grados.
<b>La temperatura a las 24 era de 24 grados.
La temperatura a las 25 era de 3424248 grados.
La temperatura a las 26 era de 7042 grados.
La temperatura a las 27 era de 1 grados.
</b>
</pre>
     </div>

     <p>Vemos que a partir del elemento 24 (incluido) tenemos resultados extraños. Esto es porque nos hemos salido de
          los límites del array e intenta acceder al elemento <code>temperaturas[24]</code> y sucesivos que no existen.
          Así
          que nos
          muestra el contenido de la memoria que está justo detrás de <code>temperaturas[23]</code> (esto es lo más
          probable), que
          puede ser cualquiera. Al contrario que otros lenguajes, <b>
               <font color="#0000ff" size="+2" face="Comic Sans MS, Arial">C</font>
          </b> no comprueba los límites de los arrays, nos deja saltárnoslos a la torera. Este programa no da error al
          compilar ni al ejecutar, tan sólo devuelve resultados extraños. Tampoco bloqueará el sistema porque no estamos
          escribiendo en la memoria sino leyendo de ella.</p>

     <p>Otra cosa muy diferente es meter datos en elementos que no existen. Veamos un ejemplo <b>(ni se te ocurra
               ejecutarlo)</b>:</p>

     <div class="ejemplo">
          <pre>
#include &lt;stdio.h&gt;

int main()
{
    int temp[24];
    float media = 0; 
    int hora;

    for (hora = 0; <b>hora &lt; 28</b>; hora++)
    {
        printf("Temperatura de las %i: ", hora );
        scanf("%i", &temp[hora]);
        media += temp[hora];
    }
    media = media / 24;

    printf("\nLa temperatura media es %f\n", media );
}
</pre>
     </div>

     <p>Lo que sospechaba: lo he probado en mi ordenador y se ha bloqueado. He tenido que apagarlo. El problema ahora es
          que estamos intentando escribir en el elemento <code>temp[24]</code>, que no existe y puede ser un lugar
          cualquiera
          de la
          memoria. Como consecuencia podemos estar cambiando algún programa o dato de la memoria que no debemos, y el
          sistema hace *pluf*. Así que mucho cuidado con esto.</p>

     <p class="volver"><a href="#arriba">[Arriba]</a></p>

     <a name="punteros"></a>
     <h2>
          Punteros a arrays
     </h2>

     <p>Aquí tenemos otro de los importantes usos de los punteros: los punteros a arrays. Estos están íntimamente
          relacionados.</p>

     <p>Para que un puntero apunte a un array se puede hacer de dos formas, una es apuntando al primer elemento del
          array:</p>

     <div class="ejemplo">
          <pre>
    int *puntero;
    int temperaturas[24];

    puntero = &temperaturas[0];
</pre>
     </div>

     <p>El puntero apunta a la dirección del primer elemento. Otra forma equivalente, pero mucho más usada es:</p>

     <div class="ejemplo">
          <pre>
    puntero = temperaturas;
</pre>
     </div>

     <p>Con esto también apuntamos al primer elemento del array. Fijaos que el puntero tiene que ser del mismo tipo que
          el array (en este caso <code>int</code>).</p>

     <p>Ahora vamos a ver cómo acceder al resto de los elementos. Para ello empezamos por cómo funciona un array: un
          array se guarda en posiciones seguidas en memoria, de tal forma que el segundo elemento va inmediatamente
          después del primero en la memoria. En un ordenador en el que el tamaño del tipo <code>int</code> es de 32 bits
          (4
          bytes)
          cada elemento del array ocupará 4 bytes. Veamos un ejemplo:</p>

     <div class="ejemplo">
          <pre>
#include &lt;stdio.h&gt;

int main()
{
    int i;
    int temp[24];

    for (i = 0; i &lt; 24; i++)
    {
        printf("La dirección del elemento %i es %p.\n", i, &temp[i]);
    }
}
</pre>
     </div>

     <p>NOTA: Recuerda que <code>%p</code> sirve para imprimir en pantalla la dirección de una variable en hexadecimal.
     </p>

     <p>El resultado es (en mi ordenador):</p>

     <div class="ejpleo">
          <pre>
La dirección del elemento 0 es 4c430.
La dirección del elemento 1 es 4c434.
La dirección del elemento 2 es 4c438.
La dirección del elemento 3 es 4c43c.
...
La dirección del elemento 21 es 4c484.
La dirección del elemento 22 es 4c488.
La dirección del elemento 23 es 4c48c.
</pre>
     </div>

     <p>(Las direcciones están en hexadecimal). Vemos aquí que efectivamente ocupan posiciones consecutivas y que cada
          una ocupa 4 bytes. Si lo representamos en una tabla:</p>

     <center>
          <table border="4" cellspacing="1" cellpadding="5">
               <tr>
                    <td align="center">
                         <font size="-1">4C430</font>
                    </td>
                    <td align="center">
                         <font size="-1">4C434</font>
                    </td>
                    <td align="center">
                         <font size="-1">4C438</font>
                    </td>
                    <td align="center">
                         <font size="-1">4C43C</font>
                    </td>
               </tr>
               <tr>
                    <td align="center">temp[0]</td>
                    <td align="center">temp[1]</td>
                    <td align="center">temp[2]</td>
                    <td align="center">temp[3]</td>
               </tr>
          </table>
     </center>

     <p>Ya hemos visto cómo funcionan los arrays por dentro, ahora vamos a verlo con punteros. Voy a poner un ejemplo:
     </p>

     <div class="ejemplo">
          <pre>
#include &lt;stdio.h&gt;

int main()
{
    int i;
    int temp[24];
    int *punt;

    <b>punt = temp;</b>

    for (i = 0; i &lt; 24; i++)
    {
        printf("La dirección de temp[%i] es %p y la de punt es %p.\n",
               i, &temp[i], <b>punt</b>);
        <b>punt++;</b>
    }
}
<font size="-2" color="#000000">Comprobado con DJGPP</font>
</pre>
     </div>

     <p>Cuyo resultado es:</p>

     <div class="ejemplo">
          <pre>
La dirección de temp[0] es 4c430 y la de punt es 4c430.
La dirección de temp[1] es 4c434 y la de punt es 4c434.
La dirección de temp[2] es 4c438 y la de punt es 4c438.
...
La dirección de temp[21] es 4c484 y la de punt es 4c484.
La dirección de temp[22] es 4c488 y la de punt es 4c488.
La dirección de temp[23] es 4c48c y la de punt es 4c48c.
</pre>
     </div>

     <p>En este ejemplo hay dos líneas importantes (en negrita). La primera es <i>punt = temp</i>. Con esta hacemos que
          el puntero <b>punt</b> apunte al primer elemento de la matriz. Si no hacemos esto, <b>punt</b> apunta a un
          sitio
          cualquiera de la
          memoria y debemos recordar que no es conveniente dejar los punteros así, puede ser desastroso.</p>

     <p>La segunda línea importante es <i>punt++</i>. Con esto incrementamos el valor de <b>punt</b>, pero curiosamente
          aunque
          incrementamos una unidad (punt++ equivale a punt = punt + 1) el valor aumenta en 4. Aquí se muestra una de las
          características especiales de los punteros. Recordemos que en un puntero se guarda una dirección. También
          sabemos que un puntero apunta a un tipo de datos determinado (en este caso <code>int</code>). Cuando sumamos 1
          a un
          puntero,
          sumamos el tamaño del tipo al que apunta. En el ejemplo el puntero apunta a una variable de tipo
          <code>int</code>
          que es de
          4 bytes, entonces al sumar 1 lo que hacemos es sumar 4 bytes. Con esto lo que se consigue es apuntar a la
          siguiente posición <code>int</code> de la memoria; en este caso es el siguiente elemento de la matriz.
     </p>

     <center>
          <table border="1" cellspacing="0" cellpadding="4">
               <tr>
                    <td bgcolor="#0000ff">
                         <font color="#ffffff"><b>Operación</b></font>
                    </td>
                    <td bgcolor="#0000ff">
                         <font color="#ffffff"><b>Equivalente</b></font>
                    </td>
                    <td bgcolor="#800000">
                         <font color="#ffffff"><b>Valor de punt</b></font>
                    </td>
               </tr>
               <tr>
                    <td>punt = temp;</td>
                    <td>punt = &amp;temp[0];</td>
                    <td align="center">4c430</td>
               </tr>
               <tr>
                    <td>punt++;</td>
                    <td>sumar 4 al contenido de punt (4c430 + 4)</td>
                    <td align="center">4c434</td>
               </tr>
               <tr>
                    <td>punt++;</td>
                    <td>sumar 4 al contenido de punt (4c434 + 4)</td>
                    <td align="center">4c438</td>
               </tr>
          </table>
     </center>

     <p>Cuando hemos acabado estamos en <code>temp[24]</code>, que no existe. Si queremos recuperar el elemento 1
          podemos
          hacer
          <i>punt = temp</i> otra vez, o restar 24 a <b>punt</b>:
     </p>

     <div class="ejemplo">
          <pre>
    punt -= 24;
</pre>
     </div>

     <p>Con esto hemos restado 24 posiciones a punt (24 posiciones int * 4 bytes por cada int = 96 posiciones).</p>

     <p>Vamos a ver ahora un ejemplo de cómo recorrer la matriz entera con punteros y cómo imprimirla:</p>

     <div class="ejemplo">
          <pre>
#include &lt;stdio.h&gt;

int main(int argc, char *argv[])
{
    int temperaturas[24] = { 15, 18, 20, 23, 22, 24, 22, 25, 26, 25, 24,
                             22, 21, 20, 18, 17, 16, 17, 15, 14, 14, 13, 12, 12 };

    int *punt;
    int i;

    punt = temperaturas;

    for (i = 0; i &lt; 24; i++)
    {
        printf("Elemento %i: %i\n", i, *punt);
        punt++;
    }
}
<font size="-2" color="#000000">Comprobado con DJGPP</font>
</pre>
     </div>

     <p>Cuando acabamos, <code>punt</code> apunta a <code>temperaturas[24]</code>, y no al primer elemento. Si queremos
          volver a recorrer la matriz,
          debemos volver como antes al comienzo. Para evitar perder la referencia al primer elemento de la matriz
          (<code>temperaturas[0]</code>) se puede usar otra forma de recorrer la matriz con punteros:</p>

     <div class="ejemplo">
          <pre>
#include &lt;stdio.h&gt;

int main(int argc, char *argv[])
{
    int temperaturas[24] = { 15, 18, 20, 23, 22, 24, 22, 25, 26, 25, 24, 
                             22, 21, 20, 18, 17, 16, 17, 15, 14, 14, 13, 12, 12 };

    int *punt;
    int i;

    punt = temperaturas;

    for (i = 0; i &lt; 24; i++)
    {
        printf("Elemento %i: %i\n", i, <b><u>*(punt + i)</u></b>);
    }
}
<font size="-2" color="#000000">Comprobado con DJGPP</font>
</pre>
     </div>

     <p>Con <code>*(punt+i)</code> lo que hacemos es tomar la dirección a la que apunta <var>punt</var> (la dirección
          del primer elemento de la matriz) y le sumamos <var>i</var> posiciones. De esta forma tenemos la dirección del
          elemento <var>i</var>. No estamos sumando un valor a <var>punt</var>; para sumarle un valor habría que hacer
          <tt>punt++</tt> o <tt>punt+=algo</tt>, así que <var>punt</var> siempre apunta al principio de la matriz.
     </p>

     <p>Se podría hacer este programa sin usar <var>punt</var>, sustituyéndolo por <var>temperaturas</var> y dejar
          <tt>*(temperaturas+i)</tt>.
          Lo que no se puede hacer es: <tt>temperaturas++;</tt>.
     </p>

     <p><b>Importante:</b> Como final debo comentar que el uso de índices es una forma de maquillar el uso de punteros.
          El ordenador convierte los índices a punteros. Cuando al ordenador le decimos <code>temp[5]</code> en realidad
          le
          estamos
          diciendo <code>*(temp+5)</code>. Así que usar índices es equivalente a usar punteros de una forma más cómoda.
     </p>

     <p class="volver"><a href="#arriba">[Arriba]</a></p>

     <a name="funciones"></a>
     <h2>
          Paso de un array a una función
     </h2>

     <p>En <b>
               <font color="#0000ff" size="+2" face="Comic Sans MS, Arial">C</font>
          </b> no podemos pasar un array entero a una función. Lo que tenemos que hacer es pasar un puntero al array.
          Con este puntero podemos recorrer el array:</p>

     <div class="ejemplo">
          <pre>
#include &lt;stdio.h&gt;

int sumar( int *m )
{
    int suma, i;

    suma = 0;
    for( i = 0; i &lt; 10; i++ )
    {
        suma += m[i];
    }
    return suma;
}

int main()
{
    int contador;
    int matriz[10] = { 10, 11, 13, 10, 14, 9, 10, 18, 10, 10 };

    for( contador = 0; contador &lt; 10; contador++ )
        printf( "   %3i\n", matriz[contador] );
    printf( "+ -----\n" );
    printf( "   %3i", sumar( matriz ) );
}
<font size="-2" color="#000000">Comprobado con DJGPP</font>
</pre>
     </div>

     <p>Este programa tiene alguna cosilla adicional como que muestra toda la matriz en una columna. Además se usa para
          imprimir los números <b>%3i</b>. El 3 indica que se tienen que alinear los números a la derecha, así queda más
          elegante.</p>

     <p>Como he indicado, no se pasa el array, sino un puntero a ese array. Si probamos el truquillo de más arriba de
          usar sizeof para calcular el número de elementos no funcionará aquí. Dentro de la función suma añadimos la
          línea:</p>

     <div class="ejemplo">
          <pre>
printf( "Tamaño del array: %i Kb, %i bits\n", sizeof m, (sizeof m)*8 );
</pre>
     </div>

     <p>Devolverá 4 (depende del compilador), que serán los bytes que ocupa el int (m es un puntero a int). ¿Cómo
          sabemos
          entonces cuál es el tamaño del array dentro de la función? En este caso lo hemos puesto nosotros mismos, 10.
          Pero creo que lo mejor es utilizar constantes como en el apartado <a href="#dimension">Sobre la dimensión de
               un array</a>.</p>

     <p>He dicho que el array no se puede pasar a una función, que se debe usar un puntero. Pero vemos que luego estamos
          usando m[i]; esto lo podemos hacer porque, como se ha mencionado antes, el uso de índices es una forma que nos
          ofrece <b>
               <font color="#0000ff" size="+1" face="Comic Sans MS, Arial">C</font>
          </b> de manejar punteros con matrices. Ya se ha visto que m[i] es equivalente a *(m+i).</p>

     <p>Otras declaraciones equivalentes serían:</p>

     <div class="ejemplo">
          <pre>
int sumar( int m[] )

int sumar( int m[10] )
</pre>
     </div>

     <p>En realidad, esta última no se suele usar; no es necesario indicar el número de elementos de la matriz.</p>

     <p>int m[] e int *m son equivalentes.</p>

     <p class="volver"><a href="#arriba">[Arriba]</a></p>

     <a name="ejercicios"></a>
     <h2>
          Ejercicios
     </h2>

     <p><b><u>Ejercicio 1:</u></b> </p>

     <p><b>Solución</b>:</p>

     <p class="volver"><a href="#arriba">[Arriba]</a></p>


     <!-- InstanceEndEditable -->
     <p class="barranavegacionabajo"><!-- InstanceBeginEditable name="PieNavegacion" -->
          <a href="cursoc9.html">[Anterior]</a> <a href="cursoc11.html">[Siguiente]</a>
          <a href="index.html" target="_top">[Contenido]</a>
          <A HREF="mailto:cursoc@elrincondelc.com" class="nombre">
               -----------------------------------------------------------------------------------------------------------------
               ISC.
               Jose Nicolas Jimenez Hernandez</A>
          <!-- InstanceEndEditable -->
     </p>

</BODY>

<!-- InstanceEnd -->

</HTML>