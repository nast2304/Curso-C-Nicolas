<HTML><!-- InstanceBegin template="/Templates/plantilla.dwt" codeOutsideHTMLIsLocked="false" -->

<HEAD>
      <!-- InstanceBeginEditable name="doctitle" -->
      <TITLE>Curso de C - Uniones y Enumeraciones</TITLE>
      <!-- InstanceEndEditable -->
      <meta name="decription" content="Curso de C - Introducci�n">
      <meta name="keywords" content="Programaci&oacute;n, Curso de C, C">
      <META NAME="GENERATOR" CONTENT="Arachnophilia 3.5">
      <META NAME="FORMATTER" CONTENT="Arachnophilia 3.5">
      <meta name="author" content="Gorka Urrutia">
      <meta name="DC.Creator" content="Gorka Urrutia">
      <META name="robots" content="noindex, nofollow">
      <link rel="stylesheet" href="cursoc.css">
      <!-- InstanceBeginEditable name="head" -->


      <!-- InstanceEndEditable -->
</HEAD>

<BODY>
      <a name="arriba"></a>

      <table width="100%" border="0">
            <tr>
                  <td align="left"><img src="cursoc.gif" alt="Curso de C" border="0">
                  </td>
                  <td align="right"><a href="http://www.elrincondelc.com" target="_top"><img src="colibri.gif"
                                    alt="El Rinc�n del C - www.elrincondelc.com" border="0"></a>
                  </td>
            </tr>
      </table>
      <!-- InstanceBeginEditable name="Titulo" -->
      <h1>Uniones y Enumeraciones</h1><!-- InstanceEndEditable -->


      <p class="barranavegaciontop"><!-- InstanceBeginEditable name="BarraNavegacion" -->
            <a href="cursoc14.html">[Anterior]</a> <a href="cursoc16.html">[Siguiente]</a>
            <a href="index.html" target="_top">[Contenido]</a>
            <!-- InstanceEndEditable -->
      </p>

      <!-- InstanceBeginEditable name="Cuerpo" -->
      <a name="arriba"></a>

      <A NAME="contenido"></A>
      <H2>
            Contenido
      </H2>

      <UL>
            <LI><A HREF="#uniones" CLASS="enlace">Uniones</A>
            <LI><A HREF="#enumeraciones" CLASS="enlace">Enumeraciones</A>
            <LI><A HREF="#ejercicios" CLASS="enlace">Ejercicios</A>
      </UL>


      <A NAME="uniones"></A>
      <H2>
            Uniones
      </H2>

      <p>Hemos visto que las estructuras toman una parte de la memoria y se la reparten entre sus miembros. Cada miembro
            tiene reservado un espacio para él solo. El tamaño total que ocupa una estructura en memoria es la suma del
            tamaño que ocupa cada uno de sus miembros.</p>

      <p>Las uniones tienen un aspecto similar en cuanto a cómo se definen, pero tienen una diferencia fundamental con
            respecto a las estructuras: los miembros comparten el mismo trozo de memoria. El espacio que ocupa en
            memoria una unión es el espacio que ocupa el campo más grande. Para entenderlo mejor vamos a ver un ejemplo:
      </p>

      <p>Primero vamos a ver cómo se define una unión:</p>

      <DIV CLASS="ejemplo">
            <PRE>
<B>union</B> <em>nombre_de_la_unión</em>
<B>{</B>
<em>campos de la unión</em>
<B>};</B>
</PRE>
      </DIV>

      <p class="mini">NOTA: No se debe olvidar el ';' después de cerrar llaves '}'.</p>

      <p>Y aquí va el ejemplo:</p>

      <DIV CLASS="ejemplo">
            <PRE>
union _persona
{
      char nombre[10];
      char inicial;
};
</PRE>
      </DIV>

      <p>Creamos una unión y sus elementos son un <em>nombre</em> de 10 bytes (nombre[10]) y la inicial (1 byte). Como
            hemos dicho la unión ocupa el espacio de su elemento más grande, en este caso <em>nombre</em>. Por lo tanto
            la unión ocupa 10 bytes. Las variables nombre e inicial comparten el mismo sitio de la memoria. Si accedemos
            a <em>nombre</em> estaremos accediendo a los primeros 10 bytes de la unión (es decir, a toda la unión); si
            accedemos a <em>inicial</em> lo que tendremos es el primer byte de la unión.</p>

      <center>
            <img src="union1.jpg" width="232" height="83" alt="">
      </center>

      <DIV CLASS="ejemplo">
            <PRE>
#include &lt;stdio.h&gt;

union _persona
{
      char nombre[10];
      char inicial;
} pers;

int main()
{
      printf("Escribe tu nombre: ");
      gets(pers.nombre);
      printf("\nTu nombre es: %s\n", pers.nombre);
      printf("Tu inicial es: %c\n", pers.inicial);
}
</PRE>
            <DIV CLASS="comprobado">Comprobado con DJGPP</DIV>
      </DIV>

      <p>Ejecutando el programa:</p>

      <DIV CLASS="ejemplo">
            <PRE>
Escribe tu nombre: <B>Gorka</B>

Tu nombre es: Gorka
Tu inicial es: G
</PRE>
      </DIV>

      <p>Para comprender mejor eso de que comparten el mismo espacio en memoria vamos a ampliar el ejemplo. Si a�adimos
            unas lineas al final que modifiquen solo la inicial e imprima el nuevo nombre:</p>

      <DIV CLASS="ejemplo">
            <PRE>
#include &lt;stdio.h&gt;

union _persona
      {
      char nombre[10];
      char inicial;
      } pers;

int main()
     {
     printf("Escribe tu nombre: ");
     gets(pers.nombre);
     printf("\nTu nombre es: %s\n", pers.nombre);
     printf("Tu inicial es: %c\n", pers.inicial);
     <FONT COLOR=#0000ff>/* Cambiamos la inicial */</FONT>
     pers.inicial='Z';
     printf("\nAhora tu nombre es: %s\n", pers.nombre);
     printf("y tu inicial es: %c\n", pers.inicial);
     }
</PRE>
            <DIV CLASS="comprobado">Comprobado con DJGPP</DIV>
      </DIV>

      <p>Tendremos el siguiente resultado:</p>

      <DIV CLASS="ejemplo">
            <PRE>
Escribe tu nombre: gorka

Tu nombre es: gorka
Tu inicial es: g

Ahora tu nombre es: Zorka
y tu inicial es: Z
</PRE>
      </DIV>

      <p>Aqui queda claro que al cambiar el valor de la inicial estamos cambiando tambien el nombre porque la inicial y
            la primera letra del nombre son la misma posicion de la memoria.</p>

      <p>Con las uniones podemos usar punteros de manera similar a lo que vimos en el capitulo de las estructuras.</p>

      <p class="volver"><a href="#arriba">[Arriba]</a></p>

      <A NAME="enumeraciones"></A>
      <H2>
            Enumeraciones
      </H2>

      <p>En el capitulo de la constantes (<A HREF="cursoc4.html">cap. 4</A>) vimos que se podia dar nombre a las
            constantes con <em>#define</em>. Utilizando esta tecnica podriamos hacer un programa en que definireamos las
            constantes <em>primero...quinto</em>.</p>

      <DIV CLASS="ejemplo">
            <PRE>
#include &lt;stdio.h&gt;

#define primero 1
#define segundo 2
#define tercero 3
#define cuarto  4
#define quinto  5

int main()
    {
    int posicion;
    posicion=segundo;
    printf("posicion = %i\n", posicion);
    }
</PRE>
            <DIV CLASS="comprobado">Comprobado con DJGPP</DIV>
      </DIV>

      <p>Sin embargo existe otra forma de declarar estas constantes y es con las enumeraciones. Las enumeraciones se
            crean con enum:</p>

      <DIV CLASS="ejemplo">
            <PRE>
<B>enum</B> <em>nombre_de_la_enumeracion</em>
	<B>{</B>
	<em>nombres de las constantes</em>
	<B>};</B>
</PRE>
      </DIV>

      <p>Por ejemplo:</em>

      <DIV CLASS="ejemplo">
            <PRE>
enum { primero, segundo, tercero, cuarto, quinto };
</PRE>
      </DIV>

      <p>De esta forma hemos definido las constantes <em>primero, segundo,... quinto</em>. Si no especificamos nada la
            primera constante (primero) toma el valor 0, la segunda (segunda) vale 1, la tercera 2,... Podemos cambiar
            estos valores predeterminados por los valores que deseemos:</p>

      <DIV CLASS="ejemplo">
            <PRE>
enum { primero=1, segundo, tercero, cuarto, quinto };
</PRE>
      </DIV>

      <p>Ahora primero vale 1, segundo vale 2, tercero vale 3,... Cada constante toma el valor de la anterior m�s uno.
            Si por ejemplo hacemos:</p>

      <DIV CLASS="ejemplo">
            <PRE>
enum { primero=1, segundo, quinto=5, sexto, septimo };
</PRE>
      </DIV>

      <p>Tendremos: primero=1, segundo=2, quinto=5, sexto=6, septimo=7.</p>

      <p>Con esta nueva tecnica podemos volver a escribir el ejemplo de antes:</p>

      <DIV CLASS="ejemplo">
            <PRE>
#include &lt;stdio.h&gt;

enum { primero=1, segundo, tercero, cuarto, quinto } posicion;

int main()
    {
    posicion=segundo;
    printf("posicion = %i\n", posicion);
    }
</PRE>
            <DIV CLASS="comprobado">Comprobado con DJGPP</DIV>
      </DIV>

      <p>Las constantes definidas con enum <B>solo</B> pueden tomar valores enteros (pueden ser negativos). Son
            equivalentes a las variables de tipo <em>int</em>.</p>

      <p>Un error habitual suele ser pensar que es posible imprimir el nombre de la constante:</p>

      <DIV CLASS="ejemplo">
            <PRE>
#include &lt;stdio.h&gt;

enum { primero=1, segundo, tercero, cuarto, quinto } posicion;

int main()
    {
    printf("posicion = %s\n", segundo);
    }
</PRE>
            <DIV CLASS="comprobado">Este ejemplo contiene errores</DIV>
      </DIV>

      <p>Es habitual pensar que con este ejemplo tendremos como resultado: <em>posicion = segundo</em>. Pero no es asi,
            en todo caso tendremos: <em>posicion = (null)</em>

      <p>Debemos pensar en las enumeraciones como una forma de hacer el programa mas comprensible para los humanos, en
            nuestro ejemplo el ordenador donde vea <em>segundo</em> pondra un 2 en su lugar.</p>



      <p class="volver"><a href="#arriba">[Arriba]</a></p>

      <A NAME="ejercicios"></A>
      <H2>
            Ejercicios
      </H2>

      <P><B><U>Ejercicio :</U></B>
      </P>


      <P><B>Solucion</B>:
      </P>

      <p align=center><a href="#arriba" class="volver">[Arriba]</a></p>

      <!-- InstanceEndEditable -->
      <p class="barranavegacionabajo"><!-- InstanceBeginEditable name="PieNavegacion" -->
            <a href="cursoc14.html">[Anterior]</a> <a href="cursoc16.html">[Siguiente]</a>
            <a href="index.html" target="_top">[Contenido]</a>
            <A HREF="mailto:cursoc@elrincondelc.com" class="nombre">
                  -----------------------------------------------------------------------------------------------------------------
                  ISC.
                  Jose Nicolas Jimenez Hernandez</A>
            <!-- InstanceEndEditable -->
      </p>
</BODY>

<!-- InstanceEnd -->

</HTML>